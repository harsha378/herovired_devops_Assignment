import configparser
import json

def read_configuration_file(filename):
    try:
        config = configparser.ConfigParser()
        config.read(filename)
        data = {}

        for section in config.sections():
            data[section] = dict(config.items(section))

        return data
    except (configparser.Error, FileNotFoundError) as e:
        print(f"Error occurred while reading the configuration file: {e}")
        return None

def save_data_as_json(data, filename):
    try:
        with open(filename, 'w') as json_file:
            json.dump(data, json_file, indent=4)
    except IOError as e:
        print(f"Error occurred while saving data as JSON: {e}")

def display_parsed_results(data):
    print("Configuration File Parser Results:")
    for section, config in data.items():
        print(f"\n{section}:")
        for key, value in config.items():
            print(f"- {key}: {value}")

if __name__ == "__main__":
    # Step 1: Read configuration file and extract key-value pairs
    config_file = "sample_config.ini"
    extracted_data = read_configuration_file(config_file)

    # Step 2: Save extracted data as JSON
    if extracted_data:
        output_file = "output.json"
        save_data_as_json(extracted_data, output_file)

    # Step 3: Display the parsed results
    if extracted_data:
        display_parsed_results(extracted_data)
